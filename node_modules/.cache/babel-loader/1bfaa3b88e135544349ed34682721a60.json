{"ast":null,"code":"import _asyncToGenerator from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useCallback,useState,useEffect}from'react';import{Link,useParams}from'react-router-dom';import Recommended from'../components/Recommended';import shareIcon from'../images/shareIcon.svg';import whiteHeartIcon from'../images/whiteHeartIcon.svg';import'../CSS/FoodsDetails.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var max=20;function FoodDetails(){var _detail$strYoutube;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),detail=_useState2[0],setDetail=_useState2[1];var idReceita=useParams();var historyUrl=window.location.href;var foodRecipe=historyUrl.includes('foods');var drinkRecipe=historyUrl.includes('drinks');var foodDetail=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,_yield$fetch$then,meals;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='https://www.themealdb.com/api/json/v1/1/lookup.php?i=';_context.next=3;return fetch(\"\".concat(url).concat(idReceita.idReceita)).then(function(response){return response.json();});case 3:_yield$fetch$then=_context.sent;meals=_yield$fetch$then.meals;setDetail(meals[0]);case 6:case\"end\":return _context.stop();}}},_callee);})),[idReceita]);var drinkDetail=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,_yield$fetch$then2,drinks;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url='https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=';_context2.next=3;return fetch(\"\".concat(url).concat(idReceita.idReceita)).then(function(response){return response.json();});case 3:_yield$fetch$then2=_context2.sent;drinks=_yield$fetch$then2.drinks;setDetail(drinks[0]);case 6:case\"end\":return _context2.stop();}}},_callee2);})),[idReceita]);useEffect(function(){if(foodRecipe){foodDetail();}else if(drinkRecipe){drinkDetail();}},[foodRecipe,foodDetail,drinkDetail,drinkRecipe]);var ingredients=[];for(var index=1;index<=max&&detail;index+=1){if(detail[\"strIngredient\".concat(index)]){ingredients.push(\"- \".concat(detail[\"strIngredient\".concat(index)],\" - \").concat(detail[\"strMeasure\".concat(index)]));}}return/*#__PURE__*/_jsxs(_Fragment,{children:[detail&&/*#__PURE__*/_jsxs(\"div\",{className:\"detailsContainer\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"imgDetail\",children:/*#__PURE__*/_jsx(\"img\",{src:foodRecipe?detail.strMealThumb:detail.strDrinkThumb,alt:\"food-icon\",\"data-testid\":\"recipe-photo\",className:\"photoRecipe\"})})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{\"data-testid\":\"recipe-title\",children:foodRecipe?detail.strMeal:detail.strDrink}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btnRecipes\",children:/*#__PURE__*/_jsx(\"img\",{\"data-testid\":\"share-btn\",src:shareIcon,alt:\"share-icon\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btnRecipes\",children:/*#__PURE__*/_jsx(\"img\",{\"data-testid\":\"favorite-btn\",src:whiteHeartIcon,alt:\"share-icon\"})}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"recipe-category\",children:foodRecipe?detail.strCategory:detail.strAlcoholic})]}),/*#__PURE__*/_jsx(\"h2\",{children:\" Ingredientes \"}),ingredients.map(function(ingredient){return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"\".concat(ingredients.indexOf(ingredient),\"-ingredient-name-and-measure\"),children:/*#__PURE__*/_jsx(\"p\",{children:ingredient})},ingredients.indexOf(ingredient));}),/*#__PURE__*/_jsx(\"h2\",{children:\" Instructions \"}),/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"instructions\",children:detail.strInstructions}),foodRecipe?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Video \"}),/*#__PURE__*/_jsx(\"iframe\",{src:(_detail$strYoutube=detail.strYoutube)===null||_detail$strYoutube===void 0?void 0:_detail$strYoutube.replace('watch?v=','embed/'),\"data-testid\":\"video\",title:\"tutorial\"})]}):null,/*#__PURE__*/_jsx(Recommended,{})]}),/*#__PURE__*/_jsx(Link,{to:foodRecipe?\"/foods/\".concat(idReceita.idReceita,\"/in-progress\"):\"/Drinks/\".concat(idReceita.idReceita,\"/in-progress\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"btnStartContainer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"start-recipe-btn\",className:\"btnStartRecipe\",children:\"Start Recipe\"})})})]}),' ']});}export default FoodDetails;","map":{"version":3,"sources":["/home/devmir/Trybe/portifolio/recipes-app/src/pages/FoodsDetails.jsx"],"names":["React","useCallback","useState","useEffect","Link","useParams","Recommended","shareIcon","whiteHeartIcon","max","FoodDetails","detail","setDetail","idReceita","historyUrl","window","location","href","foodRecipe","includes","drinkRecipe","foodDetail","url","fetch","then","response","json","meals","drinkDetail","drinks","ingredients","index","push","strMealThumb","strDrinkThumb","strMeal","strDrink","strCategory","strAlcoholic","map","ingredient","indexOf","strInstructions","strYoutube","replace"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport Recommended from '../components/Recommended';\nimport shareIcon from '../images/shareIcon.svg';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport '../CSS/FoodsDetails.css';\n\nconst max = 20;\n\nfunction FoodDetails() {\n  const [detail, setDetail] = useState('');\n  const idReceita = useParams();\n  const historyUrl = window.location.href;\n  const foodRecipe = historyUrl.includes('foods');\n  const drinkRecipe = historyUrl.includes('drinks');\n\n  const foodDetail = useCallback(async () => {\n    const url = 'https://www.themealdb.com/api/json/v1/1/lookup.php?i=';\n    const { meals } = await fetch(`${url}${idReceita.idReceita}`)\n      .then((response) => response.json());\n    setDetail(meals[0]);\n  }, [idReceita]);\n\n  const drinkDetail = useCallback(async () => {\n    const url = 'https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=';\n    const { drinks } = await fetch(`${url}${idReceita.idReceita}`)\n      .then((response) => response.json());\n    setDetail(drinks[0]);\n  }, [idReceita]);\n\n  useEffect(() => {\n    if (foodRecipe) {\n      foodDetail();\n    } else if (drinkRecipe) {\n      drinkDetail();\n    }\n  }, [foodRecipe, foodDetail, drinkDetail, drinkRecipe]);\n\n  const ingredients = [];\n  for (let index = 1; index <= max && detail; index += 1) {\n    if (detail[`strIngredient${index}`]) {\n      ingredients.push(\n        `- ${detail[`strIngredient${index}`]} - ${detail[`strMeasure${index}`]}`,\n      );\n    }\n  }\n\n  return (\n    <>\n      { detail && (\n        <div className=\"detailsContainer\">\n          <header>\n            <div className=\"imgDetail\">\n              <img\n                src={ foodRecipe ? (detail.strMealThumb) : detail.strDrinkThumb }\n                alt=\"food-icon\"\n                data-testid=\"recipe-photo\"\n                className=\"photoRecipe\"\n              />\n            </div>\n          </header>\n          <main>\n            <div>\n              <h1 data-testid=\"recipe-title\">\n                {foodRecipe\n                  ? (\n                    detail.strMeal\n                  ) : detail.strDrink }\n              </h1>\n              <button\n                type=\"button\"\n                className=\"btnRecipes\"\n              >\n                <img\n                  data-testid=\"share-btn\"\n                  src={ shareIcon }\n                  alt=\"share-icon\"\n                />\n              </button>\n              <button\n                type=\"button\"\n                className=\"btnRecipes\"\n              >\n                <img\n                  data-testid=\"favorite-btn\"\n                  src={ whiteHeartIcon }\n                  alt=\"share-icon\"\n                />\n              </button>\n              <p data-testid=\"recipe-category\">\n                {foodRecipe\n                  ? (\n                    detail.strCategory\n                  ) : detail.strAlcoholic }\n              </p>\n            </div>\n            <h2> Ingredientes </h2>\n            {ingredients.map((ingredient) => (\n              <div\n                data-testid={\n                  `${ingredients.indexOf(ingredient)}-ingredient-name-and-measure`\n                }\n                key={ ingredients.indexOf(ingredient) }\n              >\n                <p>\n                  { ingredient }\n                </p>\n              </div>))}\n            <h2> Instructions </h2>\n            <div data-testid=\"instructions\">\n              { detail.strInstructions }\n            </div>\n            { foodRecipe\n              ? (\n                <>\n                  <h2> Video </h2>\n                  <iframe\n                    src={ detail.strYoutube?.replace('watch?v=', 'embed/') }\n                    data-testid=\"video\"\n                    title=\"tutorial\"\n                  />\n                </>\n              ) : null}\n            <Recommended />\n          </main>\n          <Link\n            to={ foodRecipe ? `/foods/${idReceita.idReceita}/in-progress`\n              : `/Drinks/${idReceita.idReceita}/in-progress` }\n          >\n            <div className=\"btnStartContainer\">\n              <button\n                type=\"button\"\n                data-testid=\"start-recipe-btn\"\n                className=\"btnStartRecipe\"\n              >\n                Start Recipe\n              </button>\n            </div>\n          </Link>\n        </div>\n      ) }\n      {' '}\n\n    </>\n  );\n}\n\nexport default FoodDetails;\n"]},"metadata":{},"sourceType":"module"}