{"ast":null,"code":"import _asyncToGenerator from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useCallback,useState,useEffect}from'react';import{useParams}from'react-router-dom';import copy from'clipboard-copy';import{Link}from'react-router-dom/cjs/react-router-dom.min';import shareIcon from'../images/shareIcon.svg';import WhiteHeartIcon from'../images/whiteHeartIcon.svg';import BlackHeartIcon from'../images/blackHeartIcon.svg';import inProgressStorage,{favIcon,favorite}from'../helpers/LocalStorage';import'../CSS/ProgressRecipe.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var max=20;function FoodInProgress(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),detail=_useState2[0],setDetail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),shareMessage=_useState4[0],setShareMessage=_useState4[1];var idReceita=useParams();var _useState5=useState(favIcon([idReceita.idReceita])),_useState6=_slicedToArray(_useState5,2),favStatus=_useState6[0],setFavStatus=_useState6[1];inProgressStorage(true,[idReceita.idReceita]);var localObject=JSON.parse(localStorage.getItem('inProgressRecipes'));var _useState7=useState(Object.values(localObject.meals[idReceita.idReceita]).includes('')),_useState8=_slicedToArray(_useState7,2),finishButton=_useState8[0],setFinishButton=_useState8[1];var foodDetail=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,_yield$fetch$then,meals;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='https://www.themealdb.com/api/json/v1/1/lookup.php?i=';_context.next=3;return fetch(\"\".concat(url).concat(idReceita.idReceita)).then(function(response){return response.json();});case 3:_yield$fetch$then=_context.sent;meals=_yield$fetch$then.meals;setDetail(meals[0]);case 6:case\"end\":return _context.stop();}}},_callee);})),[idReceita]);var ingredients=[];for(var index=1;index<=max&&detail;index+=1){if(detail[\"strIngredient\".concat(index)]){ingredients.push(\"\".concat(detail[\"strIngredient\".concat(index)],\" - \").concat(detail[\"strMeasure\".concat(index)]));}}var FinishDisable=function FinishDisable(){setFinishButton(Object.values(localObject.meals[idReceita.idReceita]).includes(''));};var attFav=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:favorite('Meal',detail);setFavStatus(favIcon([idReceita.idReceita]));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function attFav(){return _ref2.apply(this,arguments);};}();var check=function check(){for(var _index=0;_index<ingredients.length&&detail;_index+=1){var box=document.getElementById(ingredients[_index]);if(box.checked){localObject.meals[idReceita.idReceita][_index]=ingredients[_index];localStorage.setItem('inProgressRecipes',JSON.stringify(localObject));}else{localObject.meals[idReceita.idReceita][_index]='';localStorage.setItem('inProgressRecipes',JSON.stringify(localObject));}}FinishDisable();};var ShareFoods=function ShareFoods(){var text=\"http://localhost:3000/foods/\".concat(idReceita.idReceita);copy(text);setShareMessage(true);};useEffect(function(){foodDetail();},[foodDetail,idReceita]);return/*#__PURE__*/_jsxs(_Fragment,{children:[detail&&/*#__PURE__*/_jsxs(\"div\",{className:\"detailsContainer\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"imgDetail\",children:/*#__PURE__*/_jsx(\"img\",{src:detail.strMealThumb,alt:\"food-icon\",\"data-testid\":\"recipe-photo\",className:\"photoRecipe\"})})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{\"data-testid\":\"recipe-title\",children:detail.strMeal}),/*#__PURE__*/_jsx(\"button\",{className:\"btnRecipes\",type:\"button\",onClick:function onClick(){return ShareFoods();},children:/*#__PURE__*/_jsx(\"img\",{src:shareIcon,\"data-testid\":\"share-btn\",alt:\"share-icon\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return attFav();},children:/*#__PURE__*/_jsx(\"img\",{className:\"btnRecipes\",\"data-testid\":\"favorite-btn\",src:favStatus?BlackHeartIcon:WhiteHeartIcon,alt:\"favorite-icon\"})}),shareMessage&&/*#__PURE__*/_jsx(\"h1\",{children:\"Link copied!\"}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"recipe-category\",children:detail.strCategory})]}),/*#__PURE__*/_jsx(\"h2\",{children:\" Ingredientes \"}),ingredients.map(function(ingredient,index){return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"\".concat(ingredients.indexOf(ingredient),\"-ingredient-step\"),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:ingredient,onClick:function onClick(){return check();},defaultChecked:localObject.meals[idReceita.idReceita][index]===ingredient}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:ingredient,children:[\"-\",ingredient]})]},ingredients.indexOf(ingredient));}),/*#__PURE__*/_jsx(\"h2\",{children:\" Instructions \"}),/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"instructions\",children:detail.strInstructions}),/*#__PURE__*/_jsx(Link,{to:\"/done-recipes\",children:/*#__PURE__*/_jsx(\"div\",{className:\"btnStartContainer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btnStartRecipe\",type:\"button\",\"data-testid\":\"finish-recipe-btn\",disabled:finishButton,children:\"Finish Recipe\"})})})]})]}),'']});}export default FoodInProgress;","map":{"version":3,"sources":["/home/devmir/Trybe/portifolio/recipes-app/src/pages/FoodInProgress.jsx"],"names":["React","useCallback","useState","useEffect","useParams","copy","Link","shareIcon","WhiteHeartIcon","BlackHeartIcon","inProgressStorage","favIcon","favorite","max","FoodInProgress","detail","setDetail","shareMessage","setShareMessage","idReceita","favStatus","setFavStatus","localObject","JSON","parse","localStorage","getItem","Object","values","meals","includes","finishButton","setFinishButton","foodDetail","url","fetch","then","response","json","ingredients","index","push","FinishDisable","attFav","check","length","box","document","getElementById","checked","setItem","stringify","ShareFoods","text","strMealThumb","strMeal","strCategory","map","ingredient","indexOf","strInstructions"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport copy from 'clipboard-copy';\nimport { Link } from 'react-router-dom/cjs/react-router-dom.min';\nimport shareIcon from '../images/shareIcon.svg';\nimport WhiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport BlackHeartIcon from '../images/blackHeartIcon.svg';\nimport inProgressStorage, { favIcon, favorite } from '../helpers/LocalStorage';\nimport '../CSS/ProgressRecipe.css';\n\nconst max = 20;\n\nfunction FoodInProgress() {\n  const [detail, setDetail] = useState('');\n  const [shareMessage, setShareMessage] = useState('');\n  const idReceita = useParams();\n  const [favStatus, setFavStatus] = useState(favIcon([idReceita.idReceita]));\n\n  inProgressStorage(true, [idReceita.idReceita]);\n\n  const localObject = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  const [finishButton, setFinishButton] = useState(Object.values(localObject.meals[\n    idReceita.idReceita]).includes(''));\n\n  const foodDetail = useCallback(async () => {\n    const url = 'https://www.themealdb.com/api/json/v1/1/lookup.php?i=';\n    const { meals } = await fetch(`${url}${idReceita.idReceita}`)\n      .then((response) => response.json());\n    setDetail(meals[0]);\n  }, [idReceita]);\n\n  const ingredients = [];\n\n  for (let index = 1; index <= max && detail; index += 1) {\n    if (detail[`strIngredient${index}`]) {\n      ingredients.push(\n        `${detail[`strIngredient${index}`]} - ${detail[`strMeasure${index}`]}`,\n      );\n    }\n  }\n\n  const FinishDisable = () => {\n    setFinishButton(Object.values(localObject.meals[\n      idReceita.idReceita]).includes(''));\n  };\n\n  const attFav = async () => {\n    favorite('Meal', detail);\n    setFavStatus(favIcon([idReceita.idReceita]));\n  };\n\n  const check = () => {\n    for (let index = 0;\n      index < ingredients.length && detail; index += 1) {\n      const box = document.getElementById(ingredients[index]);\n      if (box.checked) {\n        localObject.meals[idReceita.idReceita][index] = ingredients[index];\n        localStorage.setItem('inProgressRecipes', JSON.stringify(localObject));\n      } else {\n        localObject.meals[idReceita.idReceita][index] = '';\n        localStorage.setItem('inProgressRecipes', JSON.stringify(localObject));\n      }\n    }\n    FinishDisable();\n  };\n\n  const ShareFoods = () => {\n    const text = `http://localhost:3000/foods/${idReceita.idReceita}`;\n    copy(text);\n    setShareMessage(true);\n  };\n\n  useEffect(() => {\n    foodDetail();\n  }, [foodDetail, idReceita]);\n\n  return (\n    <>\n      { detail && (\n        <div className=\"detailsContainer\">\n          <header>\n            <div className=\"imgDetail\">\n              <img\n                src={ detail.strMealThumb }\n                alt=\"food-icon\"\n                data-testid=\"recipe-photo\"\n                className=\"photoRecipe\"\n              />\n            </div>\n          </header>\n          <main>\n            <div>\n              <h1 data-testid=\"recipe-title\">\n                { detail.strMeal }\n              </h1>\n              <button\n                className=\"btnRecipes\"\n                type=\"button\"\n                onClick={ () => ShareFoods() }\n              >\n                <img\n                  src={ shareIcon }\n                  data-testid=\"share-btn\"\n                  alt=\"share-icon\"\n                />\n              </button>\n              <button\n                type=\"button\"\n                onClick={ () => attFav() }\n              >\n                <img\n                  className=\"btnRecipes\"\n                  data-testid=\"favorite-btn\"\n                  src={ favStatus ? BlackHeartIcon : WhiteHeartIcon }\n                  alt=\"favorite-icon\"\n                />\n              </button>\n              { shareMessage && (\n                <h1>Link copied!</h1>\n              )}\n              <p data-testid=\"recipe-category\">\n                { detail.strCategory }\n              </p>\n            </div>\n            <h2> Ingredientes </h2>\n            { ingredients.map((ingredient, index) => (\n              <div\n                data-testid={\n                  `${ingredients.indexOf(ingredient)}-ingredient-step`\n                }\n                key={ ingredients.indexOf(ingredient) }\n              >\n                <input\n                  type=\"checkbox\"\n                  id={ ingredient }\n                  onClick={ () => check() }\n                  defaultChecked={\n                    localObject.meals[idReceita.idReceita][index] === ingredient\n                  }\n                />\n                <label htmlFor={ ingredient }>\n                  -\n                  { ingredient }\n                </label>\n              </div>))}\n            <h2> Instructions </h2>\n            <div data-testid=\"instructions\">\n              { detail.strInstructions }\n            </div>\n            <Link to=\"/done-recipes\">\n              <div className=\"btnStartContainer\">\n                <button\n                  className=\"btnStartRecipe\"\n                  type=\"button\"\n                  data-testid=\"finish-recipe-btn\"\n                  disabled={ finishButton }\n                >\n                  Finish Recipe\n                </button>\n              </div>\n            </Link>\n          </main>\n        </div>\n      ) }\n      {''}\n\n    </>\n  );\n}\n\nexport default FoodInProgress;\n"]},"metadata":{},"sourceType":"module"}