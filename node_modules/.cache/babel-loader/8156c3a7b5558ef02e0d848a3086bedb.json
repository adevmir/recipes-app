{"ast":null,"code":"import _asyncToGenerator from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useCallback,useState,useEffect}from'react';import{useParams}from'react-router-dom';import copy from'clipboard-copy';import{Link}from'react-router-dom/cjs/react-router-dom.min';import shareIcon from'../images/shareIcon.svg';import BlackHeartIcon from'../images/blackHeartIcon.svg';import WhiteHeartIcon from'../images/whiteHeartIcon.svg';import inProgressStorage,{favIcon,favorite}from'../helpers/LocalStorage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var max=15;function DrinkInProgress(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),detail=_useState2[0],setDetail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),shareMessage=_useState4[0],setShareMessage=_useState4[1];var idReceita=useParams();var _useState5=useState(favIcon([idReceita.idReceita])),_useState6=_slicedToArray(_useState5,2),favStatus=_useState6[0],setFavStatus=_useState6[1];inProgressStorage(false,[idReceita.idReceita]);var localObject=JSON.parse(localStorage.getItem('inProgressRecipes'));var _useState7=useState(Object.values(localObject.cocktails[idReceita.idReceita]).includes('')),_useState8=_slicedToArray(_useState7,2),finishButton=_useState8[0],setFinishButton=_useState8[1];var drinkDetail=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,_yield$fetch$then,drinks;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=';_context.next=3;return fetch(\"\".concat(url).concat(idReceita.idReceita)).then(function(response){return response.json();});case 3:_yield$fetch$then=_context.sent;drinks=_yield$fetch$then.drinks;setDetail(drinks[0]);case 6:case\"end\":return _context.stop();}}},_callee);})),[idReceita]);var ingredients=[];for(var index=1;index<=max&&detail;index+=1){if(detail[\"strIngredient\".concat(index)]){ingredients.push(\"\".concat(detail[\"strIngredient\".concat(index)],\" - \").concat(detail[\"strMeasure\".concat(index)]));}}var FinishDisable=function FinishDisable(){setFinishButton(Object.values(localObject.cocktails[idReceita.idReceita]).includes(''));};var attFav=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:favorite('Drink',detail);setFavStatus(favIcon([idReceita.idReceita]));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function attFav(){return _ref2.apply(this,arguments);};}();var check=function check(){for(var _index=0;_index<ingredients.length&&detail;_index+=1){var box=document.getElementById(ingredients[_index]);if(box.checked){localObject.cocktails[idReceita.idReceita][_index]=ingredients[_index];localStorage.setItem('inProgressRecipes',JSON.stringify(localObject));}else{localObject.cocktails[idReceita.idReceita][_index]='';localStorage.setItem('inProgressRecipes',JSON.stringify(localObject));}}FinishDisable();};var ShareDrinks=function ShareDrinks(){var text=\"http://localhost:3000/drinks/\".concat(idReceita.idReceita);copy(text);setShareMessage(true);};useEffect(function(){drinkDetail();},[drinkDetail,idReceita]);return/*#__PURE__*/_jsxs(_Fragment,{children:[detail&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"img\",{src:detail.strDrinkThumb,alt:\"food-icon\",\"data-testid\":\"recipe-photo\"})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{\"data-testid\":\"recipe-title\",children:detail.strDrink}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return ShareDrinks();},children:/*#__PURE__*/_jsx(\"img\",{src:shareIcon,alt:\"share-icon\",\"data-testid\":\"share-btn\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return attFav();},children:/*#__PURE__*/_jsx(\"img\",{src:favStatus?BlackHeartIcon:WhiteHeartIcon,\"data-testid\":\"favorite-btn\",alt:\"favorite-icon\"})}),shareMessage&&/*#__PURE__*/_jsx(\"h1\",{children:\"Link copied!\"}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"recipe-category\",children:detail.strAlcoholic})]}),/*#__PURE__*/_jsx(\"h2\",{children:\" Ingredientes \"}),ingredients.map(function(ingredient,index){return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"\".concat(ingredients.indexOf(ingredient),\"-ingredient-step\"),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:ingredient,onChange:function onChange(){return check();},defaultChecked:localObject.cocktails[idReceita.idReceita][index]===ingredient}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:ingredient,children:[\"-\",ingredient]})]},ingredients.indexOf(ingredient));}),/*#__PURE__*/_jsx(\"h2\",{children:\" Instructions \"}),/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"instructions\",children:detail.strInstructions}),/*#__PURE__*/_jsx(Link,{to:\"/done-recipes\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"finish-recipe-btn\",disabled:finishButton,children:\"Finish Recipe\"})})]})]}),'']});}export default DrinkInProgress;","map":{"version":3,"sources":["/home/devmir/Trybe/portifolio/recipes-app/src/pages/DrinkInProgress.jsx"],"names":["React","useCallback","useState","useEffect","useParams","copy","Link","shareIcon","BlackHeartIcon","WhiteHeartIcon","inProgressStorage","favIcon","favorite","max","DrinkInProgress","detail","setDetail","shareMessage","setShareMessage","idReceita","favStatus","setFavStatus","localObject","JSON","parse","localStorage","getItem","Object","values","cocktails","includes","finishButton","setFinishButton","drinkDetail","url","fetch","then","response","json","drinks","ingredients","index","push","FinishDisable","attFav","check","length","box","document","getElementById","checked","setItem","stringify","ShareDrinks","text","strDrinkThumb","strDrink","strAlcoholic","map","ingredient","indexOf","strInstructions"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport copy from 'clipboard-copy';\nimport { Link } from 'react-router-dom/cjs/react-router-dom.min';\nimport shareIcon from '../images/shareIcon.svg';\nimport BlackHeartIcon from '../images/blackHeartIcon.svg';\nimport WhiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport inProgressStorage, { favIcon, favorite } from '../helpers/LocalStorage';\n\nconst max = 15;\n\nfunction DrinkInProgress() {\n  const [detail, setDetail] = useState('');\n  const [shareMessage, setShareMessage] = useState('');\n  const idReceita = useParams();\n  const [favStatus, setFavStatus] = useState(favIcon([idReceita.idReceita]));\n\n  inProgressStorage(false, [idReceita.idReceita]);\n\n  const localObject = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  const [finishButton, setFinishButton] = useState(Object.values(localObject.cocktails[\n    idReceita.idReceita]).includes(''));\n\n  const drinkDetail = useCallback(async () => {\n    const url = 'https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=';\n    const { drinks } = await fetch(`${url}${idReceita.idReceita}`)\n      .then((response) => response.json());\n    setDetail(drinks[0]);\n  }, [idReceita]);\n\n  const ingredients = [];\n\n  for (let index = 1; index <= max && detail; index += 1) {\n    if (detail[`strIngredient${index}`]) {\n      ingredients.push(\n        `${detail[`strIngredient${index}`]} - ${detail[`strMeasure${index}`]}`,\n      );\n    }\n  }\n\n  const FinishDisable = () => {\n    setFinishButton(Object.values(localObject.cocktails[\n      idReceita.idReceita]).includes(''));\n  };\n\n  const attFav = async () => {\n    favorite('Drink', detail);\n    setFavStatus(favIcon([idReceita.idReceita]));\n  };\n\n  const check = () => {\n    for (let index = 0;\n      index < ingredients.length && detail; index += 1) {\n      const box = document.getElementById(ingredients[index]);\n      if (box.checked) {\n        localObject.cocktails[idReceita.idReceita][index] = ingredients[index];\n        localStorage.setItem('inProgressRecipes', JSON.stringify(localObject));\n      } else {\n        localObject.cocktails[idReceita.idReceita][index] = '';\n        localStorage.setItem('inProgressRecipes', JSON.stringify(localObject));\n      }\n    }\n    FinishDisable();\n  };\n\n  const ShareDrinks = () => {\n    const text = `http://localhost:3000/drinks/${idReceita.idReceita}`;\n    copy(text);\n    setShareMessage(true);\n  };\n\n  useEffect(() => {\n    drinkDetail();\n  }, [drinkDetail, idReceita]);\n\n  return (\n    <>\n      { detail && (\n        <>\n          <header>\n            <img\n              src={ detail.strDrinkThumb }\n              alt=\"food-icon\"\n              data-testid=\"recipe-photo\"\n            />\n          </header>\n          <main>\n            <div>\n              <h1 data-testid=\"recipe-title\">\n                { detail.strDrink }\n              </h1>\n              <button\n                type=\"button\"\n                onClick={ () => ShareDrinks() }\n              >\n                <img\n                  src={ shareIcon }\n                  alt=\"share-icon\"\n                  data-testid=\"share-btn\"\n                />\n              </button>\n              <button\n                type=\"button\"\n                onClick={ () => attFav() }\n              >\n                <img\n                  src={ favStatus ? BlackHeartIcon : WhiteHeartIcon }\n                  data-testid=\"favorite-btn\"\n                  alt=\"favorite-icon\"\n                />\n              </button>\n              { shareMessage && (\n                <h1>Link copied!</h1>\n              )}\n              <p data-testid=\"recipe-category\">\n                { detail.strAlcoholic }\n              </p>\n            </div>\n            <h2> Ingredientes </h2>\n            {ingredients.map((ingredient, index) => (\n              <div\n                data-testid={\n                  `${ingredients.indexOf(ingredient)}-ingredient-step`\n                }\n                key={ ingredients.indexOf(ingredient) }\n              >\n                <input\n                  type=\"checkbox\"\n                  id={ ingredient }\n                  onChange={ () => check() }\n                  defaultChecked={\n                    localObject.cocktails[idReceita.idReceita][index] === ingredient\n                  }\n                />\n                <label htmlFor={ ingredient }>\n                  -\n                  { ingredient }\n                </label>\n              </div>))}\n            <h2> Instructions </h2>\n            <div data-testid=\"instructions\">\n              { detail.strInstructions }\n            </div>\n            <Link to=\"/done-recipes\">\n              <button\n                type=\"button\"\n                data-testid=\"finish-recipe-btn\"\n                disabled={ finishButton }\n              >\n                Finish Recipe\n              </button>\n            </Link>\n          </main>\n        </>\n      )}\n      {''}\n    </>\n  );\n}\n\nexport default DrinkInProgress;\n"]},"metadata":{},"sourceType":"module"}