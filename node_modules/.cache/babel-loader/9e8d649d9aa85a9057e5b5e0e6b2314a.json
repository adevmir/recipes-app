{"ast":null,"code":"import _asyncToGenerator from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useCallback,useEffect,useState}from'react';import RecipesContext from'./RecipesContext';import{jsx as _jsx}from\"react/jsx-runtime\";var maxRecipes=12;var maxCategory=5;var messageError='Sorry, we haven\\'t found any recipes for these filters.';function RecipesProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),searchFilter=_useState4[0],setSearchFilter=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),apiFilter=_useState6[0],setApiFilter=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),detail=_useState8[0],setDetail=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),email=_useState12[0],setEmail=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),shareMessage=_useState14[0],setShareMessage=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),favStatus=_useState16[0],setFavStatus=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),localData=_useState18[0],setLocalData=_useState18[1];var _useState19=useState(JSON.parse(localStorage.getItem('favoriteRecipes'))||[]),_useState20=_slicedToArray(_useState19,2),favoriteRecipes=_useState20[0],setFavoriteRecipes=_useState20[1];// Filtro de botões de FOODS\nvar foodAPICategory=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,_yield$fetch$then,meals;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='https://www.themealdb.com/api/json/v1/1/list.php?c=list';_context.next=3;return fetch(url).then(function(response){return response.json();});case 3:_yield$fetch$then=_context.sent;meals=_yield$fetch$then.meals;setCategory(meals.slice(0,maxCategory));case 6:case\"end\":return _context.stop();}}},_callee);})),[]);// requisição FOOD primeiro render\nvar fullFoodAPI=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,_yield$fetch$then2,meals;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url='https://www.themealdb.com/api/json/v1/1/search.php?s=';_context2.next=3;return fetch(url).then(function(response){return response.json();});case 3:_yield$fetch$then2=_context2.sent;meals=_yield$fetch$then2.meals;setData(meals.slice(0,maxRecipes));setLocalData(meals.slice(0,maxRecipes));case 7:case\"end\":return _context2.stop();}}},_callee2);})),[]);// requisicao com filtro FOOD\nvar foodAPI=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var url,_yield$fetch$then3,meals;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:url='https://www.themealdb.com/api/json/v1/1/';_context3.next=3;return fetch(\"\".concat(url).concat(searchFilter)).then(function(response){return response.json();});case 3:_yield$fetch$then3=_context3.sent;meals=_yield$fetch$then3.meals;if(meals===null){global.alert(messageError);}else{setData(meals.slice(0,maxRecipes));}case 6:case\"end\":return _context3.stop();}}},_callee3);})),[searchFilter]);// Filtro de botões de DRINKS\nvar drinksAPICategory=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var url,_yield$fetch$then4,drinks;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:url='https://www.thecocktaildb.com/api/json/v1/1/list.php?c=list';_context4.next=3;return fetch(url).then(function(response){return response.json();});case 3:_yield$fetch$then4=_context4.sent;drinks=_yield$fetch$then4.drinks;setCategory(drinks.slice(0,maxCategory));case 6:case\"end\":return _context4.stop();}}},_callee4);})),[]);// requisição DRINK primeiro render\nvar fullDrinkAPI=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var url,_yield$fetch$then5,drinks;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:url='https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';_context5.next=3;return fetch(url).then(function(response){return response.json();});case 3:_yield$fetch$then5=_context5.sent;drinks=_yield$fetch$then5.drinks;setData(drinks.slice(0,maxRecipes));setLocalData(drinks.slice(0,maxRecipes));case 7:case\"end\":return _context5.stop();}}},_callee5);})),[]);// requisicao com filtro DRINK\nvar drinkAPI=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var url,_yield$fetch$then6,drinks;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:url='https://www.thecocktaildb.com/api/json/v1/1/';_context6.next=3;return fetch(\"\".concat(url).concat(searchFilter)).then(function(response){return response.json();});case 3:_yield$fetch$then6=_context6.sent;drinks=_yield$fetch$then6.drinks;if(drinks===null){global.alert(messageError);}else{setData(drinks.slice(0,maxRecipes));}case 6:case\"end\":return _context6.stop();}}},_callee6);})),[searchFilter]);useEffect(function(){if(searchFilter){if(apiFilter==='Foods'){foodAPI();}else if(apiFilter==='Drinks'){drinkAPI();}}else if(apiFilter==='Foods'){fullFoodAPI();foodAPICategory();}else if(apiFilter==='Drinks'){fullDrinkAPI();drinksAPICategory();}},[apiFilter,searchFilter,foodAPI,drinkAPI,foodAPICategory,drinksAPICategory,fullDrinkAPI,fullFoodAPI]);var contextValue={data:data,setData:setData,email:email,setEmail:setEmail,searchFilter:searchFilter,setSearchFilter:setSearchFilter,apiFilter:apiFilter,setApiFilter:setApiFilter,detail:detail,setDetail:setDetail,category:category,setCategory:setCategory,fullFoodAPI:fullFoodAPI,shareMessage:shareMessage,setShareMessage:setShareMessage,favStatus:favStatus,setFavStatus:setFavStatus,localData:localData,setLocalData:setLocalData,favoriteRecipes:favoriteRecipes,setFavoriteRecipes:setFavoriteRecipes};return/*#__PURE__*/_jsx(RecipesContext.Provider,{value:contextValue,children:children});}export default RecipesProvider;","map":{"version":3,"sources":["/home/devmir/Trybe/portifolio/recipes-app/src/context/RecipesProvider.js"],"names":["React","useCallback","useEffect","useState","RecipesContext","maxRecipes","maxCategory","messageError","RecipesProvider","children","data","setData","searchFilter","setSearchFilter","apiFilter","setApiFilter","detail","setDetail","category","setCategory","email","setEmail","shareMessage","setShareMessage","favStatus","setFavStatus","localData","setLocalData","JSON","parse","localStorage","getItem","favoriteRecipes","setFavoriteRecipes","foodAPICategory","url","fetch","then","response","json","meals","slice","fullFoodAPI","foodAPI","global","alert","drinksAPICategory","drinks","fullDrinkAPI","drinkAPI","contextValue"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport RecipesContext from './RecipesContext';\n\nconst maxRecipes = 12;\nconst maxCategory = 5;\nconst messageError = 'Sorry, we haven\\'t found any recipes for these filters.';\n\nfunction RecipesProvider({ children }) {\n  const [data, setData] = useState([]);\n  const [searchFilter, setSearchFilter] = useState();\n  const [apiFilter, setApiFilter] = useState();\n  const [detail, setDetail] = useState();\n  const [category, setCategory] = useState();\n  const [email, setEmail] = useState('');\n  const [shareMessage, setShareMessage] = useState('');\n  const [favStatus, setFavStatus] = useState('');\n  const [localData, setLocalData] = useState();\n  const [favoriteRecipes, setFavoriteRecipes] = useState(\n    JSON.parse(localStorage.getItem('favoriteRecipes')) || [],\n  );\n\n  // Filtro de botões de FOODS\n  const foodAPICategory = useCallback(async () => {\n    const url = 'https://www.themealdb.com/api/json/v1/1/list.php?c=list';\n    const { meals } = await fetch(url)\n      .then((response) => response.json());\n    setCategory(meals.slice(0, maxCategory));\n  }, []);\n\n  // requisição FOOD primeiro render\n  const fullFoodAPI = useCallback(async () => {\n    const url = 'https://www.themealdb.com/api/json/v1/1/search.php?s=';\n    const { meals } = await fetch(url)\n      .then((response) => response.json());\n    setData(meals.slice(0, maxRecipes));\n    setLocalData(meals.slice(0, maxRecipes));\n  }, []);\n\n  // requisicao com filtro FOOD\n  const foodAPI = useCallback(async () => {\n    const url = 'https://www.themealdb.com/api/json/v1/1/';\n    const { meals } = await fetch(`${url}${searchFilter}`)\n      .then((response) => response.json());\n    if (meals === null) {\n      global.alert(messageError);\n    } else {\n      setData(meals.slice(0, maxRecipes));\n    }\n  }, [searchFilter]);\n\n  // Filtro de botões de DRINKS\n  const drinksAPICategory = useCallback(async () => {\n    const url = 'https://www.thecocktaildb.com/api/json/v1/1/list.php?c=list';\n    const { drinks } = await fetch(url)\n      .then((response) => response.json());\n    setCategory(drinks.slice(0, maxCategory));\n  }, []);\n\n  // requisição DRINK primeiro render\n  const fullDrinkAPI = useCallback(async () => {\n    const url = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n    const { drinks } = await fetch(url)\n      .then((response) => response.json());\n    setData(drinks.slice(0, maxRecipes));\n    setLocalData(drinks.slice(0, maxRecipes));\n  }, []);\n\n  // requisicao com filtro DRINK\n  const drinkAPI = useCallback(async () => {\n    const url = 'https://www.thecocktaildb.com/api/json/v1/1/';\n    const { drinks } = await fetch(`${url}${searchFilter}`)\n      .then((response) => response.json());\n    if (drinks === null) {\n      global.alert(messageError);\n    } else {\n      setData(drinks.slice(0, maxRecipes));\n    }\n  }, [searchFilter]);\n\n  useEffect(() => {\n    if (searchFilter) {\n      if (apiFilter === 'Foods') {\n        foodAPI();\n      } else if (apiFilter === 'Drinks') {\n        drinkAPI();\n      }\n    } else if (apiFilter === 'Foods') {\n      fullFoodAPI();\n      foodAPICategory();\n    } else if (apiFilter === 'Drinks') {\n      fullDrinkAPI();\n      drinksAPICategory();\n    }\n  }, [apiFilter, searchFilter, foodAPI, drinkAPI,\n    foodAPICategory, drinksAPICategory, fullDrinkAPI, fullFoodAPI]);\n\n  const contextValue = {\n    data,\n    setData,\n    email,\n    setEmail,\n    searchFilter,\n    setSearchFilter,\n    apiFilter,\n    setApiFilter,\n    detail,\n    setDetail,\n    category,\n    setCategory,\n    fullFoodAPI,\n    shareMessage,\n    setShareMessage,\n    favStatus,\n    setFavStatus,\n    localData,\n    setLocalData,\n    favoriteRecipes,\n    setFavoriteRecipes,\n  };\n\n  return (\n    <RecipesContext.Provider value={ contextValue }>\n      { children }\n    </RecipesContext.Provider>\n  );\n}\n\nRecipesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default RecipesProvider;\n"]},"metadata":{},"sourceType":"module"}