{"ast":null,"code":"import _asyncToGenerator from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/devmir/Trybe/portifolio/recipes-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useEffect,useCallback,useState}from'react';import{Link,useHistory}from'react-router-dom';import Header from'../components/Header';import RecipesContext from'../context/RecipesContext';import Card from'../components/Card';import Footer from'../components/Footer';import'../CSS/ListRecipes.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var maxRecipes=12;function Food(){var pageTitle='Foods';var history=useHistory();var _useContext=useContext(RecipesContext),data=_useContext.data,setApiFilter=_useContext.setApiFilter,category=_useContext.category,setData=_useContext.setData,localData=_useContext.localData;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),filterButton=_useState2[0],setFilterButton=_useState2[1];useEffect(function(){if(data.length===1&&data[0].idMeal!=='52968'){return history.push(\"/foods/\".concat(data[0].idMeal));}},[data,history]);useEffect(function(){if(!data){setApiFilter(pageTitle);}else{setApiFilter(pageTitle);}},[data,setApiFilter]);var filterCategory=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(categoryName){var url,_yield$fetch$then,meals;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(filterButton===categoryName)){_context.next=4;break;}setData(localData);_context.next=11;break;case 4:url='https://www.themealdb.com/api/json/v1/1/filter.php?c=';_context.next=7;return fetch(\"\".concat(url).concat(categoryName)).then(function(response){return response.json();});case 7:_yield$fetch$then=_context.sent;meals=_yield$fetch$then.meals;setData(meals.slice(0,maxRecipes));setFilterButton(categoryName);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[filterButton,localData,setData]);var removeFilter=function removeFilter(){setData(localData);};return/*#__PURE__*/_jsxs(\"div\",{className:\"recipesBackground\",children:[/*#__PURE__*/_jsx(Header,{pageTitle:pageTitle,btnSearch:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonContainer\",children:[!category?undefined:category.map(function(categoryName,index){return/*#__PURE__*/_jsx(\"button\",{className:\"buttonCategory\",value:categoryName.strCategory,type:\"button\",\"data-testid\":\"\".concat(categoryName.strCategory,\"-category-filter\"),onClick:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",filterCategory(event.target.value));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}(),children:categoryName.strCategory},index);}),/*#__PURE__*/_jsx(\"button\",{className:\"removeFilter\",type:\"button\",\"data-testid\":\"All-category-filter\",onClick:function onClick(){return removeFilter();},children:\"Remove Filter\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"containerRecipes\",children:!data?/*#__PURE__*/_jsx(\"p\",{children:\"loading\"}):data.map(function(recipe,index){return/*#__PURE__*/_jsx(Link,{to:\"foods/\".concat(data[index].idMeal),children:/*#__PURE__*/_jsx(Card,{index:index,infoRecipe:recipe})},index);})}),/*#__PURE__*/_jsx(Footer,{})]});}export default Food;","map":{"version":3,"sources":["/home/devmir/Trybe/portifolio/recipes-app/src/pages/Foods.jsx"],"names":["React","useContext","useEffect","useCallback","useState","Link","useHistory","Header","RecipesContext","Card","Footer","maxRecipes","Food","pageTitle","history","data","setApiFilter","category","setData","localData","filterButton","setFilterButton","length","idMeal","push","filterCategory","categoryName","url","fetch","then","response","json","meals","slice","removeFilter","undefined","map","index","strCategory","event","target","value","recipe"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useCallback, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport Header from '../components/Header';\nimport RecipesContext from '../context/RecipesContext';\nimport Card from '../components/Card';\nimport Footer from '../components/Footer';\nimport '../CSS/ListRecipes.css';\n\nconst maxRecipes = 12;\nfunction Food() {\n  const pageTitle = 'Foods';\n  const history = useHistory();\n  const { data, setApiFilter, category,\n    setData, localData } = useContext(RecipesContext);\n  const [filterButton, setFilterButton] = useState('');\n\n  useEffect(() => {\n    if (data.length === 1 && data[0].idMeal !== '52968') {\n      return history.push(`/foods/${data[0].idMeal}`);\n    }\n  }, [data, history]);\n\n  useEffect(() => {\n    if (!data) {\n      setApiFilter(pageTitle);\n    } else {\n      setApiFilter(pageTitle);\n    }\n  }, [data, setApiFilter]);\n\n  const filterCategory = useCallback(async (categoryName) => {\n    if (filterButton === categoryName) {\n      setData(localData);\n    } else {\n      const url = 'https://www.themealdb.com/api/json/v1/1/filter.php?c=';\n      const { meals } = await fetch(`${url}${categoryName}`)\n        .then((response) => response.json());\n      setData(meals.slice(0, maxRecipes));\n      setFilterButton(categoryName);\n    }\n  }, [filterButton, localData, setData]);\n\n  const removeFilter = () => {\n    setData(localData);\n  };\n\n  return (\n    <div className=\"recipesBackground\">\n      <Header pageTitle={ pageTitle } btnSearch />\n      <div className=\"buttonContainer\">\n        {!category ? undefined\n          : (\n            category.map((categoryName, index) => (\n              <button\n                className=\"buttonCategory\"\n                value={ categoryName.strCategory }\n                key={ index }\n                type=\"button\"\n                data-testid={ `${categoryName.strCategory}-category-filter` }\n                onClick={ async (event) => filterCategory(event.target.value) }\n              >\n                { categoryName.strCategory }\n              </button>\n            ))\n          )}\n        <button\n          className=\"removeFilter\"\n          type=\"button\"\n          data-testid=\"All-category-filter\"\n          onClick={ () => removeFilter() }\n        >\n          Remove Filter\n        </button>\n      </div>\n      <div className=\"containerRecipes\">\n        {!data ? <p>loading</p> : (\n          data.map((recipe, index) => (\n            <Link\n              to={ `foods/${data[index].idMeal}` }\n              key={ index }\n            >\n              <Card\n                index={ index }\n                infoRecipe={ recipe }\n              />\n            </Link>\n          ))\n        )}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default Food;\n"]},"metadata":{},"sourceType":"module"}